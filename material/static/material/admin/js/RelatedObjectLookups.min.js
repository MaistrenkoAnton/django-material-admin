!function(c){"use strict";function i(e){return e=(e=e.replace(/\./g,"__dot__")).replace(/\-/g,"__dash__")}function p(e){return e=(e=e.replace(/__dot__/g,".")).replace(/__dash__/g,"-")}function t(e,t,n){var o=e.id.replace(t,"");o=i(o);var a=e.href;return n&&(-1===a.indexOf("?")?a+="?_popup=1":a+="&_popup=1"),window.open(a,o,"height=500,width=800,resizable=yes,scrollbars=yes").focus(),!1}function n(e){return t(e,/^lookup_/,!0)}function o(e){return t(e,/^(change|add|delete)_/,!1)}function a(e){var t=c(e),n=t.closest(".related-wrapper").find(".view-related, .change-related, .delete-related");if(n.length){var o=t.val();o?n.each(function(){var e=c(this);e.attr("href",e.attr("data-href-template").replace("__fk__",o))}):n.removeAttr("href")}}function e(e,t,n){var o=p(e.name),a=document.getElementById(o);if(a){var i=a.nodeName.toUpperCase();if("SELECT"===i){if(a.options[a.options.length]=new Option(n,t,!0,!0),window.M&&window.M.FormSelect){var d=M.FormSelect.getInstance(a);if(d){var r=d.options;d.destroy(),M.FormSelect.init(a,r)}}}else"INPUT"===i&&(-1!==a.className.indexOf("vManyToManyRawIdAdminField")&&a.value?a.value+=","+t:a.value=t);c(a).trigger("change")}else{var l=o+"_to",s=new Option(n,t);SelectBox.add_to_cache(l,s),SelectBox.redisplay(l)}e.close()}window.id_to_windowname=i,window.windowname_to_id=p,window.showRelatedObjectLookupPopup=n,window.dismissRelatedLookupPopup=function(e,t){var n=p(e.name),o=document.getElementById(n);-1!==o.className.indexOf("vManyToManyRawIdAdminField")&&o.value?o.value+=","+t:document.getElementById(n).value=t;var a=document.querySelector('label[for="'+n+'"]');a&&a.classList.add("active"),e.close()},window.showRelatedObjectPopup=o,window.updateRelatedObjectLinks=a,window.dismissAddRelatedObjectPopup=e,window.dismissChangeRelatedObjectPopup=function(e,t,n,o){var a=p(e.name).replace(/^edit_/,""),i=interpolate("#%s, #%s_from, #%s_to",[a,a,a]),d=c(i);d.find("option").each(function(){this.value===t&&(this.textContent=n,this.value=o)}),d.next().find(".select2-selection__rendered").each(function(){this.lastChild.textContent=n,this.title=n}),e.close()},window.dismissDeleteRelatedObjectPopup=function(e,t){var n=p(e.name).replace(/^delete_/,""),o=interpolate("#%s, #%s_from, #%s_to",[n,n,n]);c(o).find("option").each(function(){this.value===t&&c(this).remove()}).trigger("change"),e.close()},window.showAddAnotherPopup=o,window.dismissAddAnotherPopup=e,c(document).ready(function(){c("a[data-popup-opener]").on("click",function(e){e.preventDefault(),opener.dismissRelatedLookupPopup(window,c(this).data("popup-opener"))}),c("body").on("click",".related-widget-wrapper-link",function(e){if(e.preventDefault(),this.href){var t=c.Event("django:show-related",{href:this.href});c(this).trigger(t),t.isDefaultPrevented()||o(this)}}),c("body").on("change",".related-wrapper select",function(e){var t=c.Event("django:update-related");c(this).trigger(t),t.isDefaultPrevented()||a(this)}),c(".related-wrapper select").trigger("change"),c("body").on("click",".related-lookup",function(e){e.preventDefault();var t=c.Event("django:lookup-related");c(this).trigger(t),t.isDefaultPrevented()||n(this)})})}(django.jQuery);